version: "3.5"
name: raopics
services:
  nginx:
    image: nginx:alpine
    ports:
      - 80:80
    command: [nginx, "-g", "daemon off;"]
    volumes:
      - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro

  api:
    image: meetqy/raopics-api
    tty: true
    environment:
      LIBRARY: /library # volumes中的地址
      PORT: 9600
    volumes:
      # 本地挂载library地址
      - /Users/qymeet/MEGAsync/rao.library/images:/library/images:ro
      - /Users/qymeet/MEGAsync/rao.library/metadata.json:/library/metadata.json:ro
      - /Users/qymeet/MEGAsync/rao.library/tags.json:/library/tags.json:ro
      - /Users/qymeet/MEGAsync/rao.library/raopics.db:/library/raopics.db

  rua:
    image: meetqy/raopics-rua
    environment:
      PORT: 9601
